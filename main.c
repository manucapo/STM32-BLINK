int buttonState = 0; // button held state.

int main(){

// RCC BOUNDARY ADRESS : 0x4002 1000 - 0x4002 23FF
//  AHB CLOCK ENABLE REGISTER OFFSET: 0x14
//  AHB CLOCK ENABLE REGISTER ADRESS: 0x4002 1014

*((unsigned long *) 0x40021014) |= 1<<17;  // SET AHB CLOCK ENABLE REGISTER BIT 17 TO ACTIVATE GPIOA.
*((unsigned long *) 0x40021014) |= 1<<19;  // SET AHB CLOCK ENABLE REGISTER BIT 19 TO ACTIVATE GPIOC.

// GPIOA BOUNDARY ADRESS : 0x4800 0000 - 0x4800 03FF
// GPIOA MODE REGISTER OFFSET: 0x00
// GPIOA MODE REGISTER ADRESS: 0x4800 0000	
// GPIOA OUTPUT DATA REGISTER OFFSET : 0x14
// GPIOA OUTPUT DATA REGISTER ADFRESS : 0x4800 0014

*((unsigned long *) 0x48000000) |= 1<<10;  // SET GPIOA PIN 5 MODE TO '01'
	

// GPIOC BOUNDARY ADRESS : 0x4800 0800 - 0x4800 03FF
// GPIOC INPUT DATA REGISTER OFFSET : 0x10
// GPIOC INPUT DATA REGISTER ADRESS : 0x4800 0810


while(1){

	
	if(*((unsigned long *) 0x48000810)  == 0x0000DFDF && !buttonState){  // READ BUTTON PRESS
		buttonState = 1;
		if (*((unsigned long *) 0x48000014) == 0x00000000) {  // IF LED IS OFF
		*((unsigned long *) 0x48000014) |= 1<<5;  // SET BIT 5 OF GPIOA TO '1' TO WRITE HIGH ON LED PIN. (PIN 5)
		} else {*((unsigned long *) 0x48000014) = 0x00000000;}  // RESET GPIOA OUTPUT REGISTER
}else if (*((unsigned long *) 0x48000810)  != 0x0000DFDF && buttonState) {   // READ BUTTON RELEASE
			buttonState = 0;
		}
	
}
}
